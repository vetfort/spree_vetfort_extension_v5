<div class="row mt-4">
  <div class="col-12">
    <h1 class="h3 mb-4"><i class="fas fa-file-import"></i><%= Spree.t('admin.spree_vetfort.import.title') %></h1>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="card shadow-sm rounded">
      <%= form_with url: spree.admin_vetfort_extension_v5_product_imports_path, local: true, html: { multipart: true, class: 'form-horizontal p-4' } do |form| %>
        <div class="form-group mb-4">
          <%= form.label :file, Spree.t('admin.spree_vetfort.import.file'), class: 'form-label fw-bold' %>
          <div class="custom-file">
            <%= form.file_field :file, class: 'custom-file-input', id: 'fileInput' %>
            <label class="custom-file-label" for="fileInput"><%= Spree.t('admin.spree_vetfort.import.browse') %></label>
          </div>
          <div class="form-text"><%= Spree.t('admin.spree_vetfort.import.supported_formats') %></div>
        </div>

        <div class="form-group mt-3">
          <%= form.submit Spree.t('admin.spree_vetfort.import.import'), class: 'btn btn-gradient-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%# table with imports %>
<div class="row">
  <div class="col-12">
    <div class="card shadow-sm rounded">
      <div class="card-body">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>ID</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @imports.each do |import| %>
              <tr>
                <td><%= import.id %></td>
                <td><%= import.status %></td>
                <td>
                  <%= link_to 'Edit', edit_admin_vetfort_extension_v5_product_import_path(import), class: 'btn btn-primary' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('fileInput').addEventListener('change', function(event) {
    var fileName = event.target.files[0].name;
    var nextSibling = event.target.nextElementSibling;
    nextSibling.innerText = fileName;
  });
</script>
