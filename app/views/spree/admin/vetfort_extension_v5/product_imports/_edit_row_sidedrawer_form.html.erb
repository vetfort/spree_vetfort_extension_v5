<%= turbo_frame_tag "edit-row-sidedrawer-#{row.id}" do %>
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">Редактировать поле</h5>
    <button type="button" class="btn-close" data-action="product-import-row#closeDrawer"></button>
  </div>
  <div class="card mb-4 p-3 bg-light">
    <div class="d-flex justify-content-start align-items-center gap-2">
      <pre><%= JSON.pretty_generate(row.processed_data.slice('sku', 'name', 'url')) %></pre>
    </div>
  </div>
  <div data-product-import-row-target="content">
    <%= form_with url: spree.admin_vetfort_extension_v5_product_import_product_import_row_path(import, row),
      method: :patch,
      data: { product_import_row_target: "rowForm" },
      class: "mb-3" do %>

      <div class="mb-3">
        <%= label_tag 'product_import_row[sku]', 'SKU', class: 'form-label' %>
        <%= text_field_tag 'product_import_row[sku]', row.processed_data['sku'],
            class: 'form-control',
            data: {
              action: 'blur->product-import-row#autoSubmit',
              product_import_row_target: 'input'
            } %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[name]', 'Name', class: 'form-label' %>
        <%= text_field_tag 'product_import_row[name]', row.processed_data['name'],
            class: 'form-control',
            data: {
              action: 'blur->product-import-row#autoSubmit',
              product_import_row_target: 'input'
            } %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[url]', 'URL', class: 'form-label' %>
        <%= text_field_tag 'product_import_row[url]', row.processed_data['url'],
            class: 'form-control',
            data: {
              action: 'blur->product-import-row#autoSubmit',
              product_import_row_target: 'input'
            } %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[price]', 'Price', class: 'form-label' %>
        <%= text_field_tag 'product_import_row[price]', row.processed_data['price'],
            class: 'form-control',
            data: {
              action: 'blur->product-import-row#autoSubmit',
              product_import_row_target: 'input'
            } %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[description]', 'Description', class: 'form-label' %>
        <%= text_area_tag 'product_import_row[description]', row.processed_data['description'],
            rows: 3,
            class: 'form-control',
            data: {
              action: 'blur->product-import-row#autoSubmit',
              product_import_row_target: 'input'
            } %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[taxons]', 'Taxons', class: 'form-label' %>
        <%= tom_select_tag 'product_import_row[taxons]',
          multiple: true,
          active_option: row.processed_data['taxons'],
          url: spree.import_map_row_taxons_select_options_admin_vetfort_extension_v5_product_import_product_import_row_path(import, row, format: :json),
          class: 'w-100',
          select_data: {
            'product-import-row-target': 'rowTaxonsSelect'
          }
        %>
      </div>

      <div class="mb-3">
        <%= label_tag 'product_import_row[properties]', 'Properties', class: 'form-label' %>
        <%= tom_select_tag 'product_import_row[properties]',
          multiple: true,
          active_option: row.processed_data['properties'] || [],
          url: spree.import_map_row_properties_select_options_admin_vetfort_extension_v5_product_import_product_import_row_path(import, row, format: :json),
          class: 'w-100',
          select_data: {
            'product-import-row-target': 'rowPropertiesSelect'
          }
        %>
      </div>
    <% end %>
  </div>
<% end %>
