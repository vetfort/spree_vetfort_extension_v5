_type: prompt
input_variables:
  - summary
  - taxons_json
template: |
  You are an assistant tasked with selecting the most relevant product categories (taxons) based on the product summary.

  Product summary:
  {summary}

  Available taxons:
  {taxons_json}

  Each taxon includes:
  - `id`: numeric ID
  - `name`: human-readable category name
  - `selected_by_user`: a boolean flag indicating user preference

  Your task:
  1. Review the summary and select the most appropriate taxons.
  2. Use `selected_by_user: true` as a strong hint, but override if it’s clearly wrong or irrelevant.
  3. Prioritize precision. Do not include generic or unrelated taxons.

  Output format:
  [12, 34, 56]

  Rules:
  - Only include taxon IDs that clearly apply to the product.
  - Always include animal type (e.g. “Для Собак”, “Для Кошек”).
  - Always include product type (e.g. “Лакомства”, “Консервы”).
  - Include brand and purpose (e.g. “Поддержка печени”) if applicable.
  - ❌ Do NOT include:
    - Taxons like “Категории”, “Одежда”, “Игрушки” unless product summary justifies it.
    - Duplicates or empty entries.
